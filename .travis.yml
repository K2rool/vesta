dist: trusty
sudo: false

services:
  - docker

before_install:
  - docker build -t tpwebcp .
  - docker run  -d --cap-add=NET_ADMIN tpwebcp --name tpwebcp /bin/bash -c "/vesta/docker/startup.sh;"
  - docker ps
 
script:
  - docker exec tpwebcp /bin/bash -c "sudo su -; /usr/local/vesta/test/test_actions.sh; (exit \$?)"
  - docker exec tpwebcp /bin/bash -c "sudo su -; /usr/local/vesta/test/test_json_listing.sh; (exit \$?)"